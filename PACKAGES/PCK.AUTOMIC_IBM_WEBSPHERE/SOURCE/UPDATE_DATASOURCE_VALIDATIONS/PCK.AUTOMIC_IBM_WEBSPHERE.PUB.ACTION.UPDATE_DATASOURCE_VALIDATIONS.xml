<?xml version="1.0" encoding="UTF-8"?>
<jobp>
   <metadata>
      <row>
         <version>12.3.1</version>
      </row>
   </metadata>
   <general_attributes>
      <row>
         <minimum_ae_version>11.2</minimum_ae_version>
         <auto_deactivation>F</auto_deactivation>
         <child_flags>00000000000000000000000000000000</child_flags>
         <child_queue>*OWN</child_queue>
         <deactivation_condition>ANY_OK</deactivation_condition>
         <workflow_children>4</workflow_children>
         <last_runtimes>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</last_runtimes>
         <max_parallel_action>1</max_parallel_action>
         <mrt_time>000000</mrt_time>
         <name>PCK.AUTOMIC_IBM_WEBSPHERE.PUB.ACTION.UPDATE_DATASOURCE_VALIDATIONS</name>
         <has_prompts>1</has_prompts>
         <type>JOBP</type>
         <inherit_object_variables>1</inherit_object_variables>
         <inherit_output_filter>N</inherit_output_filter>
         <queue>CLIENT_QUEUE</queue>
         <description>Websphere Update Data Source Validations</description>
         <versioning_id>1635928762</versioning_id>
      </row>
   </general_attributes>
   <documentation>
      <row>
         <Docu><![CDATA[= Action name =
PCK.AUTOMIC_IBM_WEBSPHERE.PUB.ACTION.UPDATE_DATASOURCE_VALIDATIONS

= General description =
This action updates data source connection validation properties.

= Failure Conditions =
(none)

= Inputs =
-Data Source Name*: 			                    Specify the name of the data source for which properties will be updated. E.g. Default Datasource
-Validate New Connections:  	                            Specify whether the connection manager tests newly created connections to the database. Default: YES
-Number of Retries: C1                                       Specify the number of times you want to retry making the initial connection to a database after the first pretest operation fails. Default: 100
-Retry Interval for New Connection: C1               Specify the time, in seconds, that the application server waits before retrying to make a connection if the initial attempt fails. Default: 3
-Validate Existing Pooled Connections:               Specify whether the connection manager tests the validity of pooled connections before returning them to applications. Default: YES
-Retry Interval for Existing Connection: C2          Specify the time, in seconds, to allot to the JDBC driver for validating a connection. Default: 3
-Validation Options: C3                                         Specify that the application server uses the JDBC driver to validate the connections or SQL statement that the application server sends to the database to test the connection.
-Timeout: C4 			                                     Specify the timeout, in seconds, for testing connections, either new or pooled by the application server, to the database. If the timeout expires before validating then the connection 
                                                                             is considered unusable. If retries are configured, the full value of the timeout applies to each retry. A value of 0 indicates the JDBC driver does not impose a timeout on validation 
                                                                             attempts. 
-Query: C5                                                           Specify the pre-test SQL statement that the application server sends to the database to test the connection. E.g. SELECT CURRENT SQLID FROM SYSIBM
-Advanced Options:                                              Provide additional options and arguments at the end of the command line. E.g.: -javaoption - Xmx256m
             
Note: 
C1: Optional. Required only if "Validate New Connections" is set to "Yes".

C2: Optional. Required only if "Validate Existing Pooled Connections" is set to "Yes".

C3: Optional. Required only if at least one of  "Validate New Connections" or  "Validate Existing Pooled Connections" is set to "Yes".

C4: Optional. Required only if "Validation Options " is set to "Validation by JDBC driver".

C5: Optional. Required only if "Validation Options " is set to "Validation by SQL query".

Validation by JDBC driver:  Specifies that the application server uses the JDBC driver to validate the connections. The JDBC provider must support JDBC 4.0 or greater to use this option. This option is available only if either 
                                            Validate new connections or Validate existing pooled connections is selected.

Validation by SQL string(deprecated in V7):  Specifies an SQL statement that the application server sends to the database to test the connection. Use a query that is likely to have low impact on performance. This option is 
                                                                       available only if either Validate new connections or Validate existing pooled connections is selected.

= Behavior =
(none)

=Return Value=
(none)

= Outputs =
* Return code is 0 in case of success.
* Return code is non-zero in case of failure.

= Rollback =
(none)

= Logging =
AE logs will be displayed in the AE report.

]]></Docu>
      </row>
   </documentation>
   <workflow_attributes>
      <row>
         <activation_at_runtime>1</activation_at_runtime>
         <reuse_agent_group>1</reuse_agent_group>
      </row>
   </workflow_attributes>
   <workflow_definitions>
      <row>
         <active>1</active>
         <childflags>0000000000000000</childflags>
         <column>1</column>
         <line_number>1</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>START</object_name>
         <object_type><![CDATA[<START>]]></object_type>
         <row>2</row>
         <precondition_error_action>S</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <alias>UPDATE_DATASOURCE_VALIDATIONS</alias>
         <childflags>0000000000000000</childflags>
         <column>2</column>
         <line_number>2</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.JOB.UPDATE_DATASOURCE_VALIDATIONS@WINDOWS</object_name>
         <object_type>JOBS</object_type>
         <predecessors>1</predecessors>
         <row>1</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <alias>UPDATE_DATASOURCE_VALIDATIONS</alias>
         <childflags>0000000000000000</childflags>
         <column>2</column>
         <line_number>3</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.JOB.UPDATE_DATASOURCE_VALIDATIONS@UNIX</object_name>
         <object_type>JOBS</object_type>
         <predecessors>1</predecessors>
         <row>3</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
      <row>
         <active>1</active>
         <childflags>0000000000000000</childflags>
         <column>3</column>
         <line_number>4</line_number>
         <mrt_time>000000</mrt_time>
         <object_name>END</object_name>
         <object_type><![CDATA[<END>]]></object_type>
         <predecessors>2</predecessors>
         <row>2</row>
         <precondition_error_action>A</precondition_error_action>
      </row>
   </workflow_definitions>
   <line_conditions>
      <row>
         <workflow_line_number>2</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>1</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
      <row>
         <workflow_line_number>3</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>1</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
      <row>
         <workflow_line_number>4</workflow_line_number>
         <line_number>1</line_number>
         <predecessor_line_number>3</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
      <row>
         <workflow_line_number>4</workflow_line_number>
         <line_number>2</line_number>
         <predecessor_line_number>2</predecessor_line_number>
         <ok_status>ANY_OK</ok_status>
      </row>
   </line_conditions>
   <prompt_set_list>
      <row>
         <line_number>1</line_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.CONNECTION</prompt_set>
         <display_order>1</display_order>
      </row>
      <row>
         <line_number>2</line_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <display_order>2</display_order>
      </row>
      <row>
         <line_number>3</line_number>
         <prompt_set>PCK.ITPA_SHARED.PUB.PROMPTSET.SUDO</prompt_set>
         <display_order>3</display_order>
      </row>
      <row>
         <line_number>4</line_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <display_order>4</display_order>
      </row>
   </prompt_set_list>
   <prompt_set_defaults>
      <row>
         <prompt_set_element_number>1</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.CONNECTION</prompt_set>
         <variable_name>UC4_WSADMIN_DIR_PATH#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>1</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.CONNECTION</prompt_set>
         <variable_name>UC4RB_WAS_HOST#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>1</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.CONNECTION</prompt_set>
         <value>--10</value>
         <variable_name>UC4RB_WAS_PASSWORD#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>1</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.CONNECTION</prompt_set>
         <variable_name>UC4RB_WAS_PORT#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>1</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.CONNECTION</prompt_set>
         <variable_name>UC4RB_WAS_USERNAME#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <variable_name>UC4RB_WAS_ADV_OPTIONS#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <variable_name>UC4RB_WAS_DATASOURCE_NAME#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <value>100</value>
         <variable_name>UC4RB_WAS_NO_OF_RETRIES#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <variable_name>UC4RB_WAS_PRETEST_SQL_QUERY#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <value>3</value>
         <variable_name>UC4RB_WAS_RETRY_INTERVAL_EXIST#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <value>3</value>
         <variable_name>UC4RB_WAS_RETRY_INTERVAL_NEW#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <variable_name>UC4RB_WAS_TIMEOUT#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <value>YES</value>
         <variable_name>UC4RB_WAS_VALIDATE_EXIST_CONN#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <value>YES</value>
         <variable_name>UC4RB_WAS_VALIDATE_NEW_CONN#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>2</prompt_set_element_number>
         <prompt_set>PCK.AUTOMIC_IBM_WEBSPHERE.PRV.PROMPTSET.UPDATE_DATASOURCE_VALIDATIONS</prompt_set>
         <variable_name>UC4RB_WAS_VALIDATION_OPTIONS#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PUB.PROMPTSET.SUDO</prompt_set>
         <value>--10</value>
         <variable_name>UC4RB_SUDO_PASSWORD#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PUB.PROMPTSET.SUDO</prompt_set>
         <variable_name>UC4RB_SUDO_USER#</variable_name>
      </row>
      <row>
         <prompt_set_element_number>3</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PUB.PROMPTSET.SUDO</prompt_set>
         <value>None</value>
         <variable_name>UC4RB_USE_SUDO#</variable_name>
      </row>
      <row>
         <alternative_view>1</alternative_view>
         <prompt_set_element_number>4</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <value>&amp;AGENT#</value>
         <variable_name>AGENT#</variable_name>
      </row>
      <row>
         <alternative_view>1</alternative_view>
         <prompt_set_element_number>4</prompt_set_element_number>
         <prompt_set>PCK.ITPA_SHARED.PRV.PROMPTSET.OVERWRITE_AGENT</prompt_set>
         <value>&amp;LOGIN#</value>
         <variable_name>LOGIN#</variable_name>
      </row>
   </prompt_set_defaults>
   <rollback_definitions>
      <row>
      </row>
   </rollback_definitions>
</jobp>
